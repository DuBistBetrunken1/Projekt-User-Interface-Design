<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Eurocommand</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="header">
    <nav class="top-nav">
      <ul>
        <li><a href="#">Produkte</a></li>
        <li><a href="#">Service</a></li>
        <li><a href="#">Unternehmen</a></li>
        <li><a href="#">Kontakt</a></li>
        <li><button id="darkModeToggle" aria-label="Dark Mode umschalten">🌙</button></li>
      </ul>
    </nav>
  </header>

  <section class="news-section">
    <h2>📰 Neuigkeiten</h2>
    <div class="news-panel">
      <strong>⚡ Neue Version von CommandX veröffentlicht</strong>
      <p>Die neue Version bietet Verbesserungen in der Bedienbarkeit und Performance.</p>
    </div>
    <div class="news-panel">
      <strong>📍 Nutzer können jetzt Standortverfolgung aktivieren</strong>
      <p>Die neue Funktion ermöglicht noch genauere Einsatzkoordination.</p>
    </div>
  </section>

  <section class="products-section">
    <h2>✨ Unsere Produkte</h2>
    <div class="product-row">
      <div class="product-text">
        <h3>AlertX</h3>
        <p>Die multifunktionale Alarmierungs-App.</p>
      </div>
      <div class="product-image">
        <img src="alertx.png" alt="AlertX" />
      </div>
    </div>
    <div class="product-row reverse">
      <div class="product-text">
        <h3>CommandX</h3>
        <p>Die digitale Führungsunterstützungsplattform.</p>
      </div>
      <div class="product-image">
        <img src="commandx.png" alt="CommandX" />
      </div>
    </div>
    <div class="product-row">
      <div class="product-text">
        <h3>CommandX.Mobile</h3>
        <p>Die mobile Führungsunterstützungsapp.</p>
      </div>
      <div class="product-image">
        <img src="mobile.png" alt="CommandX.Mobile" />
      </div>
    </div>
    <div class="product-row reverse">
      <div class="product-text">
        <h3>CommandX.WIS</h3>
        <p>Alarm- und Informationsanzeigesystem.</p>
      </div>
      <div class="product-image">
        <img src="wis.png" alt="CommandX.WIS" />
      </div>
    </div>
  </section>

  <section class="cta-section">
    <div class="cta-content">
      <div class="cta-text">
        <h2>Bereit für den nächsten Schritt?</h2>
        <p>Du hast Interesse an einem unserer Produkte oder benötigst Unterstützung für deine Einsatzführung? Sende uns deine Anfrage und wir melden uns kurzfristig bei dir zurück.</p>
        <button class="cta-button" onclick="document.getElementById('contactForm').scrollIntoView({ behavior: 'smooth' });">Jetzt anfragen</button>
      </div>
      <div class="cta-image">
        <img src="cta-illustration.png" alt="Illustration" />
      </div>
    </div>
  </section>

  <section class="form-section" id="contactForm">
    <div class="form-content">
      <div class="form-text">
        <h2>Jetzt unverbindlich Kontakt aufnehmen</h2>
        <p>Ob CommandX, AlertX oder unsere mobilen Lösungen – teile uns dein Anliegen mit, und wir beraten dich individuell.</p>
      </div>
      <form class="contact-form">
        <label for="name">Name</label>
        <input type="text" id="name" placeholder="Max Mustermann" required />
        <label for="email">E-Mail</label>
        <input type="email" id="email" placeholder="max@example.de" required />
        <label for="message">Nachricht</label>
        <textarea id="message" rows="5" placeholder="Ich interessiere mich für ..."></textarea>
        <div class="form-footer">
          <label><input type="checkbox" required /> Ich akzeptiere die <a href="#">Datenschutzerklärung</a>.</label>
          <button type="submit">Jetzt absenden</button>
        </div>
      </form>
    </div>
  </section>

  <!-- Chatbot Button -->
  <button class="chat-toggle" onclick="toggleChat()">💬</button>

  <!-- Chatbot Fenster -->
  <div class="chatbot" id="chatbot">
    <div class="chatbot-header">
      <div>
        <strong>Wie kann ich dir helfen?</strong>
        <span>Eurocommand Chatbot</span>
      </div>
      <div class="chatbot-controls">
        <button onclick="resetChat()" title="Zurücksetzen">🔄</button>
        <button onclick="toggleChat()" title="Schließen">×</button>
      </div>
    </div>

    <div class="chatbot-messages" id="chatMessages">
      <div class="bot-msg">Hallo! Wie kann ich dir helfen?</div>
      <div class="chatbot-options" id="chatOptions">
        <button onclick="handleChat('software')">🛠 Softwareproblem</button>
        <button onclick="handleChat('bug')">🐞 Fehler melden</button>
        <button onclick="handleChat('interest')">📦 Interesse</button>
        <button onclick="handleChat('other')">❓ Sonstiges</button>
      </div>
    </div>

    <div class="chatbot-input">
      <input type="text" id="userInput" placeholder="Nachricht eingeben" />
      <button onclick="sendMessage()">➤</button>
    </div>
  </div>

<script>
const chatbot = document.getElementById("chatbot");
const chatMessages = document.getElementById("chatMessages");
const chatOptions = document.getElementById("chatOptions");
const userInput = document.getElementById("userInput");
const darkToggle = document.getElementById("darkModeToggle");

function toggleChat() {
  chatbot.classList.toggle("visible");
}

const dialogFlows = {
  software: [
    { type: "bot", text: "Welches Produkt bereitet dir Probleme?", input: "buttons", options: ["AlertX", "CommandX", "CommandX.Mobile", "CommandX.WIS"] },
    { type: "bot", text: "Danke für die Info. Könntest du das Problem bitte näher beschreiben?", input: "text" },
    { type: "bot", text: "Tritt das Problem regelmäßig auf oder nur gelegentlich?", input: "buttons", options: ["Regelmäßig", "Gelegentlich"] },
    { type: "bot", text: "Verstanden. Ein realer Supportmitarbeiter wird sich deinem Anliegen jetzt widmen und den Chat betreten." }
  ],
  bug: [
    { type: "bot", text: "Bitte beschreibe den Fehler möglichst genau.", input: "text" },
    { type: "bot", text: "Welches Produkt und welche Version nutzt du aktuell?", input: "text" },
    { type: "bot", text: "Wie kritisch ist der Fehler?", input: "buttons", options: ["Blockiert Nutzung", "Beeinträchtigt Nutzung", "Nur kosmetisch"] },
    { type: "bot", text: "Perfekt, ich leite die Information an unser Technikteam weiter." }
  ],
  interest: [
    { type: "bot", text: "Für welches Produkt interessierst du dich?", input: "buttons", options: ["AlertX", "CommandX", "CommandX.Mobile", "CommandX.WIS"] },
    { type: "bot", text: "Super Wahl! Was interessiert dich am meisten?", input: "buttons", options: ["Funktionsumfang", "Preise", "Live-Demo"] },
    { type: "bot", text: "Möchtest du eine individuelle Beratung oder eine Online-Schulung buchen?", input: "buttons", options: ["Beratung buchen", "Online-Schulung"] },
    { type: "bot", text: "Du kannst dir auch eine Online-Schulung durch unser geschultes Personal sichern." }
  ],
  other: [
    { type: "bot", text: "Bitte schildere dein Anliegen.", input: "text" },
    { type: "bot", text: "Danke. Geht es um eines unserer Produkte oder etwas anderes?", input: "buttons", options: ["Produktfrage", "Partnerschaft", "Technik", "Sonstiges"] },
    { type: "bot", text: "Ein Supportmitarbeiter wird sich in Kürze melden." }
  ]
};

let currentFlow = [];
let currentStep = 0;

function handleChat(type) {
  chatMessages.innerHTML = "";
  currentFlow = dialogFlows[type];
  currentStep = 0;
  const step = currentFlow[currentStep];
  appendBotMessage(step.text);

  if (step.input === "buttons") {
    showOptions(step.options);
  } else if (step.input === "text") {
    showTextInput();
  } else {
    hideInput();
  }
  currentStep++;
}

function continueDialog(userReply = null) {
  if (userReply) appendUserMessage(userReply);
  if (currentStep >= currentFlow.length) return;

  const step = currentFlow[currentStep];
  appendBotMessage(step.text);

  if (step.input === "buttons") {
    showOptions(step.options);
  } else if (step.input === "text") {
    showTextInput();
  } else {
    hideInput();
  }

  currentStep++;
}

function showOptions(options) {
  chatOptions.innerHTML = "";
  chatOptions.style.display = "grid";
  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.onclick = () => {
      chatOptions.style.display = "none";
      continueDialog(opt);
    };
    chatOptions.appendChild(btn);
  });
  userInput.disabled = true;
  userInput.placeholder = "";
}

function showTextInput() {
  chatOptions.innerHTML = "";
  chatOptions.style.display = "none";
  userInput.disabled = false;
  userInput.placeholder = "Nachricht eingeben...";
  userInput.focus();
}

function hideInput() {
  chatOptions.innerHTML = "";
  chatOptions.style.display = "none";
  userInput.disabled = true;
  userInput.placeholder = "";
}

function sendMessage() {
  const message = userInput.value.trim();
  if (!message) return;
  userInput.value = "";
  continueDialog(message);
}

function appendBotMessage(text) {
  const msg = document.createElement("div");
  msg.className = "bot-msg";
  msg.textContent = text;
  chatMessages.appendChild(msg);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

function appendUserMessage(text) {
  const msg = document.createElement("div");
  msg.className = "user-msg";
  msg.textContent = text;
  chatMessages.appendChild(msg);
  chatMessages.scrollTop = chatMessages.scrollHeight;
}

function resetChat() {
  chatMessages.innerHTML = `<div class="bot-msg">Hallo! Wie kann ich dir helfen?</div>`;
  chatOptions.style.display = "grid";
  chatOptions.innerHTML = `
    <button onclick="handleChat('software')">🛠 Softwareproblem</button>
    <button onclick="handleChat('bug')">🐞 Fehler melden</button>
    <button onclick="handleChat('interest')">📦 Interesse</button>
    <button onclick="handleChat('other')">❓ Sonstiges</button>
  `;
  userInput.disabled = true;
  userInput.placeholder = "";
}

darkToggle.addEventListener("click", () => {
  document.body.classList.toggle("dark");
});

resetChat();
</script>
</body>
</html>
